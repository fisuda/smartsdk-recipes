<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>Intro - SmartSDK Recipes</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link href="https://fiware.org/style/fiware_readthedocs.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Intro";
    var mkdocs_page_input_path = "data-management/cygnus/readme.md";
    var mkdocs_page_url = "/data-management/cygnus/readme/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> SmartSDK Recipes</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../installation/">Installation</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Recipes</span></li>

        
            
    <ul class="subnav">
    <li><span>Data/Context Management</span></li>

        
            
    <ul class="subnav">
    <li><span>Context Broker</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../context-broker/readme/">Intro</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../context-broker/simple/readme/">Simple</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../context-broker/ha/readme/">HA</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>STH</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../sth/readme/">Intro</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../sth/standalone/readme/">Standalone</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../sth/ha/readme/">HA</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Cygnus</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Intro</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#cygnus">Cygnus</a></li>
                
                    <li><a class="toctree-l4" href="#some-considerations-regarding-ha">Some Considerations regarding HA</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ha/readme/">HA</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>QuantumLeap</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../quantumleap/readme/">Intro</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>IoT Services Enablement</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../iot-services/readme/">IDAS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../iot-services/iotagent-json/readme/">IoT Agent JSON</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../iot-services/iotagent-lwm2m/readme/">IoT Agent LWM2M</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../iot-services/iotagent-ul/readme/">IoT Agent UL</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Utils</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../utils/mongo-replicaset/readme/">MongoDB Replica Set</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../tools/readme/">Tools</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../contributing/">Contributing</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">SmartSDK Recipes</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Data/Context Management &raquo;</li>
        
      
        
          <li>Cygnus &raquo;</li>
        
      
    
    <li>Intro</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/smartsdk/smartsdk-recipes/edit/master/recipes/data-management/cygnus/readme.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="cygnus">Cygnus</h1>
<p>Here you can find recipes aimed at different usages of Cygnus, in particular, cygnus-ngsi. We assume you are already familiar with it, but if not, refer to the <a href="http://fiware-cygnus.readthedocs.io/en/latest/index.html">official documentation</a>.</p>
<p>Instructions on how to prepare your environment to test these recipes are given in the <a href="../../../installation/">Installation</a> section of the docs.</p>
<h2 id="some-considerations-regarding-ha">Some Considerations regarding HA</h2>
<p>The first thing to note is that when we talk about high availability while using cygnus, we refer to the availability of data processed by cygnus agents before it's dropped to the final storage solution. So, as you can read from the <a href="http://fiware-cygnus.readthedocs.io/en/latest/index.html">official documentation</a>, different sinks can give you persistence in different storage solutions (mongodb, mysql, hdfs, etc). Keeping the persisted data in HA mode is a different challenge and the implementation will depend on the used solution. For the case of MongoDB, you can have a look at the <a href="../../utils/mongodb/replica/readme.md">MongoDB Replicaset Recipe</a>. So, this recipes will show you how to connect to some backends, but how you manage them is up to you.</p>
<p>Moreover, we will be discussing the deployment of the agent as a single configurable entity. But note that within an agent, there exist multiple available configurations (using single and multiple sources, channels and sinks), as described in <a href="http://fiware-cygnus.readthedocs.io/en/latest/architecture/index.html#advanced-cygnus-architectures">Advanced Cygnus Architectures</a>. How you setup those internal advanced architectures and the advantages of each will not be covered here, since this is already discussed in the official documentation.</p>
<p>That being said, in order to deploy Cygnus, we need to understand whether it's a stateless or stateful service. It turns out that source and sink parts of the agent do not persist data, however, the channels do, at least for a short period of time until data is processed and taken out of the channel by the sink[s]. As you can read from Cygnus and Flume's documentation, channels come in the form of MemoryChannel and FileChannel.</p>
<p>It's easy to see that MemoryChannel and Batching has a potential for data loss, for example, in the case when an agent crashes before events were taken out of the channel. In fact, to avoid storage access for each event, Cygnus comes with default values of batch size and batch flush timeouts. As a side note, it'd be nice if this could be dynamically changed according to dynamic demands, but this is an interesting point to investigate at a later point.</p>
<p>Therefore, the FileChannel could be used, at the cost of a higher latency, to give persistence to the "inflight data" and this way prevent a complete loss if there happens to be a software failure/crash at the agent. Note however that the location of this file within the container and not customizable, hence a container crash will cause those un-flushed values to be lost.</p>
<p>One could explore ways to persist those channels somewhere else, or share channels across different containers. Or maybe looking for Message-based solutions such as Solace to be used at the Channel level. But this of course, would involve some updates to Cygnus which are beyond the scope of this project.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ha/readme/" class="btn btn-neutral float-right" title="HA">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../sth/ha/readme/" class="btn btn-neutral" title="HA"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/smartsdk/smartsdk-recipes" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../sth/ha/readme/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../ha/readme/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../../js/theme.js"></script>
      <script src="../../../iot-services/iotagent-json/config.js"></script>
      <script src="../../../iot-services/iotagent-lwm2m/config.js"></script>
      <script src="../../../iot-services/iotagent-ul/config.js"></script>

</body>
</html>
